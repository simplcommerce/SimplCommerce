<div class="page-header">
    <div class="row">
        <div class="col-md-8">
            <h1>Sản phẩm</h1>
        </div>
        <div class="col-md-4 text-right">
            <a href="Create" class="btn btn-primary"><span class="glyphicon glyphicon-plus"></span> Tạo san pham moi</a>
        </div>
    </div>
</div>

@(Html.Kendo().Grid<HvCommerce.Web.Areas.Admin.ViewModels.ProductListItem>()
        .Name("gridProduct")
        .Columns(columns =>
        {
            columns.Bound(p => p.Name);
            columns.Bound(p => p.IsPublished);
            columns.Bound(p => p.Id)
                .ClientTemplate(@"<a href='Edit/#:Id#' title='Xem chi tiết' class='btn btn-xs btn-info'> <span class='glyphicon glyphicon-pencil'</span></a>
                                  <a href='Delete/#:Id#' title='Xóa' class='btn btn-danger btn-xs delete'> <span class='glyphicon glyphicon-remove'></span></a>")
                .Filterable(false).Sortable(false).Title("Actions").Width(150);
        })
        .Pageable()
        .Sortable()
        .ColumnMenu()
        .Filterable()
        .DataSource(dataSource => dataSource
            .Ajax()
                .Sort(sort => sort.Add(x => x.CreatedOn).Descending())
            .Read(read => read.Url("ListAjax"))
        )
)


@section scripts {
    <script type="text/javascript">
        $(function () {
            $("#gridProduct").on("click", ".delete", function (e) {
                e.preventDefault();
                if (confirm("Bạn muốn xóa mục này?")) {
                    $.post(this.href).success(function () {
                        var grid = $("#gridProduct").data("kendoGrid");
                        grid.dataSource.read();
                    });
                }
            });
        });
    </script>
}